{"version":3,"sources":["audio/notes.ts","matrix/renderers.ts","matrix/events.ts","matrix/index.ts","audio/index.ts","metronome/index.ts","index.ts"],"names":[],"mappings":";;;;;AAAa,AEEb,IAAI,GFFS,CAAA,GEEF,EFFE,CEEC,EFFO,CACnB,CECF,GFFqB,EAEnB,IAFmB,EAGnB,IAHmB,EAInB,IAJmB,EAKnB,IALmB,EAMnB,IANmB,EAOnB,IAPmB,EAQnB,IARmB,EASnB,IATmB,EAUnB,IAVmB,EAWnB,IAXmB,EAYnB,IAZmB,EAanB,IAbmB,EAcnB,IAdmB,EAenB,IAfmB,EAgBnB,IAhBmB,CAAR;AIAb,AJmBa,AEhBb,ADHA,AIAA,IDAA,AFGI,AGHJ,GLmBa,CAAA,CCnBJ,EGAT,ACAA,GDAA,ACAA,CHGe,GAAG,CFgBL,EInBb,AHAA,AIAA,CDAA,AJmB2B,AEhB3B,ADHsB,AIAtB,GJAA,EAAmC,GAAnC,CGAA,CAAA,AHA8C,AIA9C,CAAA,CDCA;AJmBE,AEhBF,ADHE,EDmBA,EAAE,AEhBE,EFgBA,ACnBE,KDkBmB,CClBb,ECGE,CDHC,ECIf,MDJuB,CAAC,aAAT,CAAuB,QAAvB,CAAf,mICGF;AFiBE,AEfF,ADJE,AIDF,EJCE,ECII,AGLN,IJCQ,CDmBC,ACnBA,GIDT,ELkB2B,CEbV,AGLjB,GHME,ADLA,CAAiB,GAAjB,AIDF,CJCuB,AIDvB,WAAA,CAAA,CJCE,6QCIF;AEJA,AJoBE,ACnBA,EDmBA,ACnBA,EGDI,CJoBD,EAAE,CCnBC,CGDG,AHCF,GGDK,AJiBa,MChBzB,CAAiB,GAAjB,CAAqB,SAAO,GAA5B;AGAA,AJoBA,AEdF,ADLE,AIDF,ELoBE,ACnBA,EDmBE,CIpBC,CJoBC,ECnBE,CGDC,AFMA,ADLA,AIDA,CDAJ,CJgBsB,EIhBd,GADC,AHEZ,CAAe,ECKjB,AGNA,CHMoB,ADLlB,AIDkB,GJCG,AIDvB,EAA6B,IHM7B,ADL6B,CAAC,CCKU,EDLX,CAA3B;AGAA,AJoBA,AEdA,ADLA,AIFkB,EJElB,GGDG,CCDe,EJEZ,CGDC,AJoBA,AEdA,ADLA,AIFW,CDCf,GAAQ,CJec,AKhBP,EJElB,CGHY,AHGG,EIFG,CJElB,AIFkB,CHOX,CGPW,CJEG,MAAM,CAAC,GAAD,CAA3B;AGAA,AJoBA,AMzBF,AJWI,ADLF,AIHkB,ELsBlB,EMzBF,ADGoB,CDEf,AJoBA,EAAE,AKtBa,CHQV,CEND,AHCA,CGDJ,ACFe,CCHpB,CNmB2B,CIdd,ACFO,CCHpB,CLME,CGJY,EFSM,GIXpB,AJWuB,CIXvB,OJW+B,CAAC,OIXhC,CAAA,MJWuB,CAAwB,MAAxB,CAAnB;AELF,AJoBA,AEdE,ADLH,AIJ4B,ELuB3B,EAAE,CIpBC,CJoBC,EEdI,CEND,CAAJ,AJasB,EEPb,CEND,EFMI,CEVH,SFUa,CAAC,SAAX,CAAqB,QAArB,CAA8B,IAA9B,CAAb;AELF,AJoBA,AM1BF,AJYI,EFcF,EAAE,AM1BJ,AJYI,CENC,CJoBC,GIpBG,CAAJ,CJYsB,CMlB3B,CFMa,CFMC,CIZd,AJYe,CEXD,MEDd,CAAA,CJYI,CAAqB,MAArB,CAA4B,CIZhC,CAAA,EJYI;AELF,AJoBA,ACnBF,AILE,KDIG,IAAI,AJoBA,ACnBA,AILE,CDIN,GAAQ,CJWc,AKfX,EDFF,CCEJ,GAAa,CAAd,GAAmB,CJK5B,CILE,EJKuB;AGAvB,AJoBA,AM3BF,AJYI,ADJF,AILD,ELwBC,EM3BF,CFOK,AJoBA,CCnBG,CDmBD,CEfC,CELC,CAAJ,AHCO,EDSe,AELvB,CELS,AHCE,CCID,CIZd,EFAc,CEAd,GLQuB,CAAC,WKRxB,CAAA,CLQe,CAAuB,KKRtC,CAAA,ALQe,CAAb,YKRF,CAAA,CAAA;AFQE,AJoBA,AEfI,ADJJ,EDmBA,ACnBA,EDmBE,CIpBC,CJoBC,AEfA,ADJA,CAAC,EGDE,CAAJ,AJSsB,GITd,GFKG,ADJd,CGTY,AFaG,ADJA,GAAf,CAAmB,KCIf,GAAuB,MDJ3B,ICII;AEJJ,AJoBA,AM3BF,AJYM,ADJJ,AILF,KDIK,CFKC,GELG,AJoBA,AM3BA,ALQA,AILA,CDIJ,GAAQ,AHCX,CDOyB,CEHZ,CIZf,AJYgB,CEdF,AEEG,CDGjB,CCHA,ADGmB,ECHA,AJYb,CGTN,EAA4B;ADK1B,AJoBA,AM3BA,AJYG,ADJJ,AINkB,ELyBjB,GAAG,AElBD,CEFE,AEPA,ADEa,CLyBZ,EKzBY,CDKT,CFKC,CELL,AJOqB,EMdb,ADEK,CDKJ,AEPA,IFHD,ACKK,CAAA,EAAA,GCFb,KAAwB,SAA5B,EAAuC;AFQvC,AJoBA,AM3BE,AJYE,AGXa,EL0BjB,EAAE,AM3BA,ADCe,EDMb,AJoBA,AM3BA,AJYA,CGXa,GDMT,AJMiB,AKZR,EDMb,CCNa,EDMJ,CFKC,CAAC,EEhBH,OFgBR,GAAuB,WAAvB;AEJJ,AJoBA,AM3BC,AJYG,ADJN,AIR4B,GCF1B,GFSI,AFKA,GFeG,AM3BA,ALQA,CGDC,EAAJ,EJKqB,CILZ,AFKA,CAAC,GEjBF,CFiBR,MDJN,CAA2B,IAA3B,EAAuC;AGArC,AJoBA,AM3BE,AJYC,ADJH,EDmBA,EM3BE,CN2BC,CIpBC,AHCE,CDmBD,CCnBG,EGDA,CHCG,CGDP,AJIqB,AMXf,CAAC,EFOE,IAbD,AHcO,CAAC,SKRlB,CAA0B,GLQjB,CAAuB,IAAvB,CAAX,SKRE,EAA8C,YAAA;AFQhD,AJoBA,AM5BsD,AJarD,ADJD,AITA,EL4BA,ACnBA,CCPA,CF0BE,ACnBA,CAAC,CGDC,AJoBA,GK5BG,CDQC,CJGiB,CIHrB,CERkD,CLStD,CGDa,AER2C,ALS3C,EKTyC,CFN1C,AHeZ,CAAiB,AITA,CAAC,GAAD,CAAV,GAAkB,IJSzB,AITA;ADSA,AJoBA,AM7B0D,AJc3D,ADJC,AITD,EL4BC,ACnBA,EDmBE,ACnBA,CKVA,ALUC,CGDC,AJoBA,IIpBI,AJEiB,EIFrB,GAAS,CHCb,EGhBY,CHgBK,IAAjB;AGAA,AJoBA,AM7BC,ALUD,MGDI,GJoBG,ACnBA,CGDC,CHCR,CGDI,EJCqB,CIDZ;AAhBD,AJqCZ,AM7BD,AJcD,ADJC,AITD,CDTA,CJqCE,EK5BF,CL4BK,EAAE,EEfE,GFLkB,CKR3B,GHaA,CAAiB,SAAjB,EAAqC;AFgBnC,AEfA,AGdF,EL6BE,EAAE,EAAE,GEfG,EFNkB,UEMlB;AEJT,AJoBE,AM7BF,AJcI,ADJJ,AIXA,QHeU,CELD,AJoBA,AM7BA,ALUA,GIXT,ELQ2B,IEOP,EDJpB,CCIuB,ADJF,EKVrB,ALUA,EAQC,CKlBsB,GJcQ,CEL/B,AFKgC,CELD,EAA/B,EAQC,SFHsB,CAAwB,MAAxB,CAAnB;AFgBF,AM7BA,AJcE,AGNF,ELqBA,GAAG,CIpBH,AETM,ALUN,CDmBK,CIpBL,AFKQ,EDJR,CGDA,ACDA,CLFyB,AEQb,CELZ,AHCA,CGDA,CETe,AJcA,ADJf,CAAA,EKVkB,EDQlB,CAAY,CCRU,GJcG,CAAC,AGN1B,EAA2B,KCRL,CAAA,CJcP,CAAqB,KIdlB,CAAc,EJcjB,CAA8B,IIdb,AJcjB,CIdiB,AJc9B,KIdgB,CAAlB;AN8BA,AM7BA,ADOA,ELsBA,AM7BA,EN6BE,EIpBF,AJoBI,ACnBJ,EIHA,CJGA,CDLyB,AMLzB,CAAA,CLUA,CIHA,CDEA,AHCA,CAAA,CIHA,CDEA,AETA,CAAO,CFSP,CAAA,ACFA,CAA2B,CAyC3B;ALlBA,AM9BS,AJcP,EFgBF,EAAE,AM9BO,EFUT,AJoBI,ACnBJ,ECGM,CIdQ,CFUd,CJLyB,AMLT,CJcd,ADHF,CGDA,CFIY,CEJZ,AHCA,CGDA,CHCA,CKXgB,ALWhB,CKXgB,KAAT;AFgBP,AJeA,AM/BuB,AJenB,ADEJ,IKjBuB,EFgBjB,AFDF,ADEE,GGDG,AJeF,ECdI,CGDC,CEhBoB,CNKP,ACYX,CKjBkB,CJelB,CAAC,GECK,CAAC,CHCC,CAAC,GCFnB,CAAqB,MAArB,CAA4B,EDElB,CGDF,AHCyB,CCFjC,CECJ,GHCc,CAAd;AGAA,AJeA,AMhCO,AJgBH,ADEJ,AI+BQ,EDhCR,AJeA,ACdA,CKlBA,EFiBG,AJeA,CIfC,AFDA,CFgBC,ACdA,CAAC,CI+BE,GL5CiB,GIYzB,CAAc,AFDA,CAAC,ADEf,CAAgB,CI+BR,EDhCR,AHCA,CAAoB,AI+BC,EDhCC,EAAtB,AFDI,GAAuB,ADE3B,KI+BqB,KHjCjB;AEEJ,AJeA,AMhCD,AJgBI,ADEH,AI+BU,EDhCV,AJeA,EAAE,CIfC,CAAC,AJeA,ACdE,EAAE,EDdiB,AK6Cf,CJ/BC,EGDX,CAAY,ACgCF,GAAA,CDhCV,ICgCU,CAAA,IAAA,CJ/BkB,CAAC,IAAD,CAA5B;AGAA,AJeA,ACdA,EAAA,KAAK,CAAC,CGDC,AJeA,GIfP,EJdyB,ACezB,CAAa,EAAb;AGAD,AJeC,AMhCF,AJeI,ADGF,AI8BE,ELhBF,EEjBE,CFiBC,CCdG,CDcD,AMhCA,CAAC,ELkBI,AI8BJ,EL9CmB,CEad,ADGE,CCHD,AGiCF,IHjCR,CGiCa,GChDV,CAAP,ADgDQ,IAAiB,EJ9BM,EAA7B,AI8B2B,KAAK,EAA9B,EAAkC;ALfpC,AEjBC,ADGD,AI8BI,ELhBJ,ACdA,CCXA,CFyBE,EAAE,CCdC,CAAC,AI8BF,EL/CqB,GK+CjB,CJ9BR,AI8BS,CJ9BI,GI8BT,CJ9BJ,EI8BgB,CAAZ;AD9BN,AJeE,AEjBD,ADGC,AI8BG,MJ9BG,CI4BJ,ED7BY,AJeP,ICdM,AI8BJ,CLhDgB,ECkBT,CGDlB,CAAyB,AHCvB,EGDF,EAMC;AJUC,AKgBI,ELhBJ,GAAG,CIfH,CJeK,CKgBD,ED/BJ,EJlByB,CIkBzB,AC+BQ,CAAC,CD/BT,CAAA,EC+BI,IAAa,CAAb;ALfJ,AEjBF,ADEE,AI+BG,ELhBH,EAAE,EIfF,AJeI,CCfC,ECFE,EFjBkB,ACmBhB,GGAT,AHAY,GGAZ,AHAe,CAAf,CGAA,CAAA,AHAkB,GAAG,GAAG,MAAxB,EAAgC,CCFlC,CAAoC,CDEC,EAAnC,EAAuC,ICFzC,EAAwD;AEOtD,AJWA,AEjBA,ADEE,EDeF,EAAE,ACfA,EGII,AJWF,AEjBE,KFlBmB,ACoBhB,CAAC,EGII,EFNE,ADEd,CGIe,AHJF,ECFI,MEMM,CAAC,CFNC,CAAC,CDED,CAAC,GAAD,EAAM,CGIhB,EAAjB,AHJ2B,CAAzB,GCFiB,CAAwB,MAAxB,CAAnB;AEOA,AJWA,AEjBA,ADEC,AI8BC,ED1BF,IFNM,AGgCJ,GLfK,CIXC,CAAC,AC0BH,CAAC,CLnDkB,GEmBT,EEMhB,CAAiB,AFNE,CGgCjB,GAAgB,ID1BO,AFNE,AGgCzB,CD1BwB,AFNE,WEM5B,GFNmB,CAAwB,MAAxB,CAAnB;AEOA,AJWA,AEjBA,AGgCE,ED1BF,AJWA,AEjBA,GFiBG,CKeD,CLfG,GIXG,CAAC,AJ1BgB,AKoDnB,CHhCI,AGgCH,CHhCI,EEMX,CAAc,QC0BZ,GAAoB,EHhCtB,CAA4B,CEM5B,CAA8B,AC0B5B,CD1BF,EAAiC,EFNjC,EAAqC,IEMI,CAAC,KFNK,CAAC,KEMhD,EAAuD,CAAvD,CFN+C,CAA/C;AEOA,AJWA,AEjBA,ADCA,EDgBA,AEjBA,ADCA,EDgBE,EIXI,AJWF,AChBA,CAAC,EGKI,EJ3BgB,CI2Bb,AFNF,CAAC,ADCX,CAAW,KAAX,CAAA,IAAA,EAAe,GCDf,CAA4B,GEMK,AHLjC,CGKkC,GFNlC,EAAqC,OAAO,CAAC,SAAD,CAA5C;AEOE,AJWF,AEjBD,ADEC,AI6BE,IDzBA,EAAE,ACyBF,EDzBI,CJWC,ACfA,EI6BD,CAAC,ELrDkB,ACwBzB,CGIM,CAAA,WAAA,CAAY,GCyBhB,CDzBI,CAD4B;AAEhC,AJWF,ACfD,EDeC,EIXE,CJWC,EAAE,KIXK,AJ7Be,EI6Bf,QAFwB;AAGhC,AJWF,AEjBF,AG8BI,ELbF,EIXE,AJWA,EAAE,AKaF,EDxBI,CFNC,CEMC,CJ9BiB,AKsDnB,CAAC,IAAL,IH9BJ,CAAqB,SAArB,EAAyC;AEGL,AJelC,AEjBA,ADEF,AI4BG,ELbD,CIfiC,CAAjC,AJeE,CKEM,CLFJ,GEjBG,ADEe,ED3BG,QEyBjB,CAAD,CDET,CCFuB,ADEc,KAArC,EAAoD;AGKlD,AJWA,AEjBE,ADEF,EGIA,EFNE,CEMC,CAAC,AHJE,GDeC,EIXP,AFNS,CEMC,CJhCe,CE0Bb,EDEI,GCFd,ADEiB,CGID,CAAC,MHJQ,CAAC,IGI5B,kBHJmB,EAAnB;AGKA,AJWA,AEjBE,AGgDM,ED1CR,AJWA,GAAG,EAAE,CEjBG,CGgDA,CD1CA,CAAC,AJjCgB,EK2EjB,CHhDM,CEMd,CAAc,AC0CC,CHhDE,CAAC,CAAC,MAAjB,GGgDa,GD1Cf,CAA8B,GAA9B,EAAmC,QAAQ,CAAC,WAA5C,EAAyD,IAAzD;AACA,AJWA,AEjBE,ADCF,AI+CQ,ED1CR,AJWA,EAAE,AEjBA,EFiBE,CChBC,GGKG,AJlCiB,AK4EjB,CD1CC,AHLA,CI+CD,EJ/CI,CGKZ,AFNa,AGgDL,CD1CM,CHLC,CCDC,ADChB,CCDiB,CDCC,AI+CV,GJ/Ca,ECDE,CAAC,ADCA,KGKxB,AHL6B,CGKC,AHLA,GCDb,CAAiB,EEMlC,AHLA,EGKsC,AHLA,GAAG,CCDxB,CAA0B,ADC3C,EAA6C,CGKC,CAAC,AFN9B,CAAf,UEMoC,GAAuB,IAA7D,EAAmE,KAAnE;AACA,AJWA,AEjBE,ADCA,AI8CM,EDzCR,EFNE,CEMC,CAAC,EHLI,CDgBD,CIXP,AFNQ,AG+CE,CDzCD,AFNA,CDCG,GD9Ba,AC8BV,GI8CL,CDzCO,CAAC,AFNhB,ADCkB,CCDD,ADCE,AI8CX,EAAA,CJ9CU,AI8CV,CJ9CR,ECDA,CAAwB,GEMjB,CFNP,AG+CM,EDzCwB,CAAhC;AACD,AJWC,AEjBE,ADCA,AI6CM,EL7BR,GAAG,EAAE,CEjBG,ADCA,EI6CY,CH9CT,EF9Bc,AC+BZ,CCDC,AG8CM,EJ7CJ,CI6CI,EAAA,CH9CA,AG8CA,CH9CC,GG8Cb,GH9CmB,ADCA,CCDC,ADCA,OCDP,CAAe,GAAhB,CAAlB;AFkBF,AEjBE,ADA4B,AI6CtB,EL5BR,EAAE,EAAE,ACjB0B,ECAtB,EDA0B,AI6CR,CL5ED,AE+Bd,CDAuB,ECApB,AG6CY,EJ7CE,CI6CF,EAAA,CH7CN,AG6CM,CH7CL,GG6Cb,GH7CmB,CAAC,OAAP,CAAe,GAAhB,CAAlB;AEdJ,AJgCE,AEjBE,ADDkC,AI6C5B,IH5CN,EDDkC,CGdtC,CAAA,CJgCS,AClBgC,CI6CP,CJ7CO,ECC5B,CAAC,ADDgB,AI6CI,CL5EP,CIiB3B,CC2DkC,ED3DlC,AC2DkC,CAAA,IAAxB,EH5CN,CEfJ,AFe2B,GAAvB,EAA4B,GAA5B;AFkBF,AEjBC,ADFwC,EDmBzC,CEzBA,EFyBG,CCnBsC,CDmBpC,KCnB0C,CD/BtB,CC+BwB,KAAK,CAAC;AGazD,AJOE,AEjBD,ADH6B,AI8C1B,EL1BF,EAAE,CCpByB,CDoBvB,ACpBF,GGaY,CCiCR,CAAC,CL7EkB,IK6Ed,CAAC,ODjCd,CAAgC,EAAhC,EAIyB,AC6BrB,EAAwB;ALzB1B,ACpBE,AI8CE,EL1BJ,EAAE,ACpBA,EGaF,AJOI,EK0BA,GDjCJ,CJ7CyB,EI6CzB,AHbY,CAAC,CGab,ACiCI,CDjCJ,ACiCI,IJ9CF,CAAkB,KAAlB,KI8CE,CAAgB,QAAhB,EAA0B,IAA1B;ALzBJ,AEjBF,ADHG,AI8CG,MDjCJ,ECiCI,CL1BG,AEjBA,IG2CC,CDjCR,ACiCS,CL/EgB,EI8CzB,CFVF,CEUE,CAAA,CFVgB,KG2CZ,GAAoB,IAApB;ALzBJ,AEjBA,AG2CG,EL1BH,AEjBA,GFiBG,CIPH,CJOK,EEjBE,GAAG,CFrCe,CI+CzB,EFVA,CEUA,EAAA,CAAA;AJQA,AEjBD,ADJC,EDqBA,EAAE,EAAE,ACrBE,MDlCmB,CCkCZ,GAAG,QAAQ,CAAC,cAAT,CAAwB,gBAAxB,CAAhB;AGeA,AJOA,ACrBA,AI8CE,EJ9CF,IGcI,CAAC,EJOE,ACrBA,CAAC,AI8CF,EDhCI,CAAC,CCgCT,CLjFuB,CCmCzB,AI8CY,CJ9CG,EGcf,EAAmB,MHdnB;AGeE,AJOF,AEjBF,ADJC,AI8CK,ELzBJ,GAAG,EAAE,CKyBD,CH1CG,IFxCkB,gBKkFA,CAAC,GH1C5B,CAAkC,AG0CP,CAArB,QH1CN,EAAsD;AEWnD,AJOD,AEjBA,AG0CG,ELzBH,EAAE,EAAE,GEjBG,GFzCkB,OEyCjB,CAAD,EAAc;AFkBrB,AEjBE,ADfJ,AIyDG,ELzBD,EAAE,CKgBM,CLhBJ,CChCN,CCeQ,ADfR,ID3B2B,GE0CvB,ADfJ,ECeiB,CDfjB,YAAA;AGyBE,AJQA,AEjBI,MESE,GJQC,KA5DkB,EIoDT,GAAG,KAAK,CAAC,KAAK,CAAC,MAAP,CAAxB;AACA,AJQA,AEjBG,AGzCD,EL0DF,GAAG,CIRG,CJQD,CK1DG,ILHiB,EIqDX,GAAG,GClDG,GAChB,EDiDqB,CAAC,GCjDhB,CAAC,MDiDM,EAAjB,ICjDI,IAAwB,MAAc,CAAC,kBADzC;ADmDF,AJQA,AKzDE,ELyDF,EAAE,EIRI,AJQF,GKzDG,ELLkB,CKKvB,GAAW,EDiDI,CCjDf,EDiDkB,KAAK,CAAC,GAAN,CAAU,UAAC,IAAD,EAAK;AACjC,AJQF,AElBE,AGvCA,QHuCM,CFkBD,AKzDA,EDiDL,ECjDA,CHuCY,CF7CW,CKMX,CHuCG,CAAC,CAAC,EGvCjB,IHuCA,OEUqB,CAAC;AAAE,AJS1B,AElBE,AGvCA,ELyDF,GAAG,CITuB,CJSrB,CITuB,AFTpB,CGvCD,CDgDuB,EFTlB,CF9Ca,AKOvB,EHuCa,CGvCD,CDgDgB,CAAA,EChD5B,CHuCmB,CAAC,OESQ,CAAY,CFT3B,CAAiB,EESF,CAAN,KFTT,CAA0B,IAA1B,CAAb;AES+C,AJUjD,AKzDE,ELyDF,EAAE,EIV+C,AJU7C,GKzDG,ELRkB,GIuDgC,AC/CvD,ED+CuD,CC/C1C,KAAb,ED+CsB;AAAmC,AJW3D,AEnBE,AGtCA,MD8CyD,EFRpD,CFmBA,AKzDA,CD8CwD,EAAE,AFRtD,GF/Cc,CE+CV,CAAC,AGtCd,GAAgB,IAAhB,IHsCI,IAA2B,CAAC,IAAD,IAAS,WAAxC,EAAsD;AEQhC,AJYxB,AEnBI,AGtCF,ELyDF,GIZuB,AJYpB,CIZD,AFPE,CFmBC,EKzDE,GHsCG,CFhDe,AEgDd,IGtCT,GAAgB,EHsCd,CAAiB,CGtCC,KHsClB,CAAwB,IAAxB,EGtCc,EAAhB;AD6C0E,AJa5E,AEnBI,AGtCF,ELyDF,CIdoB,CAApB,AJcE,EAAE,GKzDG,CHsCG,EFjDe,CEiDZ,GAAG,KGtCd,CHsCoB,CAAC,CGtCD,KHsCO,AGtC3B,CHsC4B,OAAP,CAAe,GAAhB,CAAlB;AEQJ,AJYA,AEnBI,AGtCF,ED6CF,AJYA,EAAE,EAAE,GKzDG,CD6CC,AFPE,CEOD,CJzDgB,CEkDZ,EEOb,AC7CE,CD6CY,AFPE,EGtCA,IHsCM,CAAC,AGtCF,CAAC,GAAN,CAAU,CHsCG,CAAC,CEO9B,CAA8B,CAA9B,EAAiC,EFPV,CAAe,EGtCZ,CHsCJ,CAAlB,CEOqC,CAAC,WAA1C,EAAuD,CAAvD;AACA,AJYA,AEnBI,AGvC4B,ED8ChC,IFPI,GFmBG,CIZC,CAAC,EC9CuB,ELZP,AEmDZ,CAAC,CGvCsB,CD8CpC,CAAiB,GC9Ce,CAAU,ID8CjB,CAAC,AFPtB,AGvC2C,CHuCpB,AGvCqB,GHuC5C,EAA4B,CGvCA,EHuC5B,AGvCoD,ED8CxD,EC9CgC,CAA6B,KAA7B,CAAA;AD+ChC,AJYA,AEnBG,AGxCgE,ED+CnE,AJYA,GAAG,AK3Da,CAAd,CL2DG,MIZM,AJ3Dc,CI2Db,OAAZ,CAAoB,UAAC,EAAD,EAAG;AAAK,AJa5B,AEnBC,AGxCA,EL2DD,CE/BA,CF+BE,EAAE,KIbwB,CJ3DH,CI2DK,CAAC,KAAH,EAAA;AAAU,AJctC,AEnBD,GEKC,MJcO,MAzEkB;AI4DzB,AJcA,AK3DA,ED6CA,AJcA,AK3DA,GL2DG,EAAE,GIdG,CAAC,AC7CT,CAAA,CLfyB,EI4DzB,CAAc,KC7Cd,CAAA,SD6CA,CAA8B,EC7C9B,GAAA,KD6CA,EAA0C,GC7C7B,GAAb,ED6CkD,AC7CxB,CD6CyB,EC7CnD,EAAqC,OD6CrC,EAAgE,IAAhE;AACA,AJcA,AEnBF,AGxCU,ED6CR,AJcA,EAAE,EAAE,EK3DI,CHwCD,CEKC,AC7CA,CD6CC,CJ7DgB,CKgBjB,ED6CR,CAAc,CC7CN,cD6CR,CACE,CFNJ,CAAkC,IEKhC,EAEE,GFPJ,EAAsD,GEO1C,CAAC,WAAT,GAAuB,QAAQ,GAAG,CAFpC,EAGE,KAHF;AAKA,AJUA,AEnBA,AGzCQ,EDkDR,AJUA,EAAE,EAAE,AEnBE,EGzCI,ILhBe,CIkEd,CAAC,AClDF,GAAA,EAAA,CHyCU,AGzCV,CDkDV,CAAoB,CFTG,GGzCf,MDkDa,EAAD,EAAG,WFTwB,CAAC,SAAD,CAA/C;AES4B,AJW5B,AEnBA,AG1CQ,MH0CF,EG1CY,CL6DX,EIXqB,EAAE,AClDZ,CDkDa,CJlEN,CKgBP,EDkDU,AClDV,CDkDkB,AFRjB,AG1CD,GH0CI,EG1Cd,GDkDoC,CAAC,KFRZ,CAAC,KEQE,GAAuB,CFR1B,CAAjC,MEQmE,GAAG,EAA1C,CAAA;AAA6C,AJYzE,AEnBA,AG3CQ,EL8DR,AEnBA,CEOA,EJYG,EAAE,CK9DoB,EH2CjB,CAAC,EF3DgB,EE2DzB,CAAc,AG3CW,GAAA,EAAA,CAAA,QAAjB,EH2CR,CAA+B,SAA/B,EAA0C,SAA1C;AEQD,AJYC,AEnBA,EFmBA,EAAE,EAAE,AEnBE,KF5DmB,ME4DR,GAAG,QAAQ,CAAC,sBAAT,CAAgC,aAAhC,CAApB;AFoBA,AK/DE,QAAM,CL+DD,GK/DK,ELjBa,CKiBV,CAAC,MAAM,CAAC,GAAD,CAAN,CAAY,GAAZ,CAAd;AD2BJ,AJqCE,AEpBA,AG3CE,EL+DF,EK/DE,CL+DC,EIrCL,AJqCO,AEpBgB,CEjBvB,EC1BU,CH2Ca,AG3CZ,CLlBgB,CE6DJ,CG3Cb,CAAN,CH2CmB,AG3CP,CH2CO,EAAA,AG3CnB,ID0BJ,AC1BuB,GD0BvB,CC1BI,KH2CmB,GAAA,MEjBvB,KFiBE,EAAqB,EAAA,GAAA,aAAA,CAAA,MAArB,EAAqB,EAAA,EAArB,EAAkC;AFqBlC,AErBK,EFqBL,EAAE,EAAE,EErBO,GF7Dc,GE6DR,GAAA,aAAA,CAAA,EAAA,CAAZ;AFsBL,AErBE,AG3CA,IH2CA,IG3CI,CLgEC,CErBC,CAAC,CG3CP,EAAU,CLnBa,YE8DvB,CAAwB,YAAxB,EAAsC,cAAtC;AFsBF,AErBE,AG3CE,ELgEJ,EErBE,CFqBC,CKhEC,CLgEC,GErBG,CAAC,EF/DgB,AKoBrB,CAAA,QAAA,CAAS,IH2CX,CAAwB,WAAxB,EAAqC,aAArC;AFsBF,AErBC,AG5Cc,ELiEf,EAAE,EAAE,EKjEW,ILpBU,AKoBN,EAAE,KAAK,CAAC,GAAD,CAAb;ALkEb,AErBD,AG7CkC,ELkEjC,EAAE,EAAE,EKlE6B,ILpBR,IKoBgB,EAAA;ALmEzC,AKnEa,OAAT,ELmEG,MAvFkB;AAwFzB,AErBF,AG9CK,ELmEH,GAAG,EAAE,EErBiB,IFnEG,YEmE3B,CAAyC,SAAzC,EAA6D;AFsB3D,AErBA,AG9CC,ELmED,AErBA,CGrDA,CL0EE,EAAE,MAzFqB,gBEoEC,CAAC,SAAD,CAA1B;AFsBA,AErBA,EAAA,OFqBO,MA1FkB,WEqED,CAAC,SAAD,CAAxB;AFsBA,AErBD,AG9CC,ELmEA,AKnEA,GLmEG,EAAE,IKnEL,CAAA,CLxByB,QKwBzB,CAAA,IAAA,GAAA,YAAA;ALoEA,AKnEQ,ELmER,EAAE,EAAE,EKnEI,EAAA,ELzBiB,CKyBjB,IAAA;ALoER,AE1BF,AG1CU,ELoER,EAAE,EAAE,CE1BN,CAAA,AG1CY,ILzBe,GEmE3B,GAAA,AG1CY,GAAA,EAAA,CAAA,UH0CZ,AG1CU;ALqER,AKrEQ,QAAc,CLqEf,EKrEe,GAAA,CLzBG,CKyBH,CAAA,GAAd;ALsER,EAAA,GAAG,EAAE,MA/FoB;AAgGzB,AKtEE,ELsEF,EAAE,EAAE,GKtEG,GL1BkB,KK0BvB,GAAgB,WAAW,CAAC,UAAD,EAAa,SAAS,CAAC,GAAD,CAAtB,CAA3B;ALuEF,AKtEE,SLsEK,AKtEA,IAAL,EL3BuB,CK2BX,IAAZ;ALuEF,AKtEC,ELsED,CK1EA,EL0EG,EAAE,MAlGoB;AAmGzB,EAAA,EAAE,EAAE,KAnGqB;AAoGzB,AKtEA,EAAA,OLsEO,EKtEP,CAAA,GL9ByB,MK8BzB,CAAA,KAAA,GAAA,YAAA;ALuEA,AKtEU,ELsEV,GAAG,EAAE,CKtEK,KL/Be,GK+Bf,GAAA,KAAA,QAAA;ALuEV,AKtEE,ELsEF,EAAE,AKtEA,ELsEE,MAtGqB,AKgCf,IAAI,aAAa,CAAC,QAAD,CAAzB;ALuEF,AKtEE,ELsEF,EAAE,EAAE,GKtEG,GLjCkB,CKiCvB,GAAY,KAAZ;ALuEF,AKtEC,GAJD,ML0EO,OAxGkB;AAyGzB,EAAA,GAAG,EAAE,OAzGoB;AA0GzB,AKtEA,ELsEA,AKtEA,ELsEE,EAAE,KKtEJ,CAAA,CLpCyB,QKoCzB,CAAA,IAAA,GAAA,YAAA;ALuEA,AKtEE,SLsEK,AKtEA,KAAL,ELrCuB;AA4GzB,AKtEE,ELsEF,GAAG,EAAE,EKtEE,IAAL,CLtCuB,EKsCX,IAAZ;ALuEF,AKtEE,ELsEF,EAAE,EAAE,GKtEG,ILvCkB,IKuCvB,GAAgB,IAAhB;ALuEF,AKtEE,ELsEF,EAAE,AKtEA,ELsEE,MKtEF,CLxCuB,AKwCvB,iBAAA;ALuEF,AKtEC,GALD,ML2EO,OA/GkB;AAgHzB,EAAA,GAAG,EAAE,OAhHoB;AAiHzB,AKxDQ,ELwDR,AKxDQ,ELwDN,EAAE,KKxDI,CAAA,CLzDiB,QKyDjB,CAAA,qBAAA,GAAR,YAAA;ALyDA,AKxDQ,QAAA,CLwDD,CKxDC,GAAA,GL1DiB,CK0DjB;ALyDR,AKzDQ,ELyDR,GAAG,EAAE,CKzDK,IAAA,EL1De,CK0Df,EAAA,CAAA,IAAF;AL0DR,AK1DQ,EL0DR,EAAE,EAAE,EK1DY,IL1DS,CK0DT,GAAA,EAAA,CAAA,KAAR;AL2DR,AK3DQ,QAAe,CL2DhB,KK3DgB,EL1DE,CK0DF,EAAA,CAAA,MAAf;AL4DR,EAAA,GAAG,EAAE,OAtHoB;AAuHzB,AK5DE,EL4DF,EAAE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","file":"src.77de5100.js","sourceRoot":"../src","sourcesContent":["export const NOTES = [\n  'D5',\n  'C5',\n  'B4',\n  'A4',\n  'G4',\n  'F4',\n  'E4',\n  'D4',\n  'C4',\n  'B3',\n  'A3',\n  'G3',\n  'F3',\n  'E3',\n  'D3',\n  'C3',\n]\n\nexport const NOTES_TO_HZ = {\n  C0: 16.35,\n  'C#0': 17.32,\n  Db0: 17.32,\n  D0: 18.35,\n  'D#0': 19.45,\n  Eb0: 19.45,\n  E0: 20.6,\n  F0: 21.83,\n  'F#0': 23.12,\n  Gb0: 23.12,\n  G0: 24.5,\n  'G#0': 25.96,\n  Ab0: 25.96,\n  A0: 27.5,\n  'A#0': 29.14,\n  Bb0: 29.14,\n  B0: 30.87,\n  C1: 32.7,\n  'C#1': 34.65,\n  Db1: 34.65,\n  D1: 36.71,\n  'D#1': 38.89,\n  Eb1: 38.89,\n  E1: 41.2,\n  F1: 43.65,\n  'F#1': 46.25,\n  Gb1: 46.25,\n  G1: 49.0,\n  'G#1': 51.91,\n  Ab1: 51.91,\n  A1: 55.0,\n  'A#1': 58.27,\n  Bb1: 58.27,\n  B1: 61.74,\n  C2: 65.41,\n  'C#2': 69.3,\n  Db2: 69.3,\n  D2: 73.42,\n  'D#2': 77.78,\n  Eb2: 77.78,\n  E2: 82.41,\n  F2: 87.31,\n  'F#2': 92.5,\n  Gb2: 92.5,\n  G2: 98.0,\n  'G#2': 103.83,\n  Ab2: 103.83,\n  A2: 110.0,\n  'A#2': 116.54,\n  Bb2: 116.54,\n  B2: 123.47,\n  C3: 130.81,\n  'C#3': 138.59,\n  Db3: 138.59,\n  D3: 146.83,\n  'D#3': 155.56,\n  Eb3: 155.56,\n  E3: 164.81,\n  F3: 174.61,\n  'F#3': 185.0,\n  Gb3: 185.0,\n  G3: 196.0,\n  'G#3': 207.65,\n  Ab3: 207.65,\n  A3: 220.0,\n  'A#3': 233.08,\n  Bb3: 233.08,\n  B3: 246.94,\n  C4: 261.63,\n  'C#4': 277.18,\n  Db4: 277.18,\n  D4: 293.66,\n  'D#4': 311.13,\n  Eb4: 311.13,\n  E4: 329.63,\n  F4: 349.23,\n  'F#4': 369.99,\n  Gb4: 369.99,\n  G4: 392.0,\n  'G#4': 415.3,\n  Ab4: 415.3,\n  A4: 440.0,\n  'A#4': 466.16,\n  Bb4: 466.16,\n  B4: 493.88,\n  C5: 523.25,\n  'C#5': 554.37,\n  Db5: 554.37,\n  D5: 587.33,\n  'D#5': 622.25,\n  Eb5: 622.25,\n  E5: 659.26,\n  F5: 698.46,\n  'F#5': 739.99,\n  Gb5: 739.99,\n  G5: 783.99,\n  'G#5': 830.61,\n  Ab5: 830.61,\n  A5: 880.0,\n  'A#5': 932.33,\n  Bb5: 932.33,\n  B5: 987.77,\n  C6: 1046.5,\n  'C#6': 1108.73,\n  Db6: 1108.73,\n  D6: 1174.66,\n  'D#6': 1244.51,\n  Eb6: 1244.51,\n  E6: 1318.51,\n  F6: 1396.91,\n  'F#6': 1479.98,\n  Gb6: 1479.98,\n  G6: 1567.98,\n  'G#6': 1661.22,\n  Ab6: 1661.22,\n  A6: 1760.0,\n  'A#6': 1864.66,\n  Bb6: 1864.66,\n  B6: 1975.53,\n  C7: 2093.0,\n  'C#7': 2217.46,\n  Db7: 2217.46,\n  D7: 2349.32,\n  'D#7': 2489.02,\n  Eb7: 2489.02,\n  E7: 2637.02,\n  F7: 2793.83,\n  'F#7': 2959.96,\n  Gb7: 2959.96,\n  G7: 3135.96,\n  'G#7': 3322.44,\n  Ab7: 3322.44,\n  A7: 3520.0,\n  'A#7': 3729.31,\n  Bb7: 3729.31,\n  B7: 3951.07,\n  C8: 4186.01,\n}\n","function createButton(row: number, col: number) {\n  const button = document.createElement('button')\n  button.classList.add('step-button')\n  button.classList.add(`col-${col}`)\n  button.dataset.row = String(row)\n  button.dataset.col = String(col)\n  return button\n}\n\nfunction createSpanButton() {\n  const span = document.createElement('span')\n  span.classList.add('step-buttons')\n  return span\n}\n\nfunction createTrackNameH3(name: string) {\n  const h3 = document.createElement('h3')\n  h3.classList.add('track-name')\n  h3.textContent = name\n  return h3\n}\n\nfunction createTrack({\n  note,\n  row,\n  length,\n}: {\n  note: string\n  row: number\n  length: number\n}) {\n  const track = document.createElement('div')\n  track.classList.add('track')\n  const h3 = createTrackNameH3(note)\n  track.append(h3)\n  const span = createSpanButton()\n  track.append(span)\n  const buttons = []\n  for (let col = 0; col < length; col++) {\n    buttons.push(createButton(row, col))\n  }\n  span.append(...buttons)\n\n  return track\n}\n\nexport default function renderMatrix(notes: string[]) {\n  const matrixFrag = document.createDocumentFragment()\n  for (let row = 0; row < notes.length; row++) {\n    const note = notes[row]\n    const track = createTrack({ note, row, length: notes.length })\n    matrixFrag.append(track)\n  }\n  const section = document.getElementById('matrix-section')\n  section.append(matrixFrag)\n}\n","import Metronome from '../metronome'\n\nlet mouseup = true\nlet isTurningOn = true\nconst playSVGStr =\n  '<svg width=\"20\" height=\"20\" viewBox=\"0 0 494.942 494.942\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m35.353 0 424.236 247.471-424.236 247.471z\"></path></svg>'\nconst pauseSVGStr =\n  '<svg width=\"15\" height=\"15\" viewBox=\"0 0 424.236 424.236\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m247.471 0h176.765v424.236h-176.765z\" id=\"path-1_5_\" transform=\"translate(9 2)\"></path><path id=\"path-1_4_\" d=\"m0 0h176.765v424.236h-176.765z\" transform=\"translate(2 2)\"></path></svg>'\n\nfunction togglePlay(metronome: Metronome) {\n  return () => {\n    const playButton = document.getElementById('play')\n    const isOn = playButton.classList.contains('on')\n    playButton.classList.toggle('on')\n    if (isOn) {\n      playButton.innerHTML = playSVGStr\n      metronome.pause()\n    } else {\n      playButton.innerHTML = pauseSVGStr\n      metronome.play()\n    }\n  }\n}\n\nfunction turnOff(metronome: Metronome) {\n  return () => {\n    const playButton = document.getElementById('play')\n    const isOn = playButton.classList.contains('on')\n    if (isOn) {\n      playButton.classList.toggle('on')\n      playButton.innerHTML = playSVGStr\n    }\n    metronome.stop()\n  }\n}\n\nfunction addEventHandlersToControls(metronome: Metronome) {\n  const playButton = document.getElementById('play')\n  const stopButton = document.getElementById('stop')\n  playButton.addEventListener('click', togglePlay(metronome))\n  stopButton.addEventListener('click', turnOff(metronome))\n}\n\nfunction onMousedown(metronome: Metronome) {\n  return (e: MouseEvent) => {\n    mouseup = false\n    const button = e.target as HTMLElement\n    isTurningOn = !button.classList.contains('on')\n    button.classList.toggle('on')\n    const row = Number(button.dataset.row)\n    const col = Number(button.dataset.col)\n    metronome.toggleMatrix(row, col)\n  }\n}\n\nfunction onMouseup() {\n  mouseup = true\n}\n\nfunction toggleButtonOnMouseEnter(metronome: Metronome) {\n  return (e: MouseEvent) => {\n    if (mouseup) {\n      return\n    }\n    const button = e.target as HTMLElement\n    const isOn = button.classList.contains('on')\n    if ((isOn && !isTurningOn) || (!isOn && isTurningOn)) {\n      button.classList.toggle('on')\n      const row = Number(button.dataset.row)\n      const col = Number(button.dataset.col)\n      metronome.toggleMatrix(row, col)\n    }\n  }\n}\n\nfunction addEventHandlersToMatrix(metronome: Metronome) {\n  const toggleButtonCB = toggleButtonOnMouseEnter(metronome) as EventListener\n  const onMousedownCB = onMousedown(metronome) as EventListener\n  document.body.addEventListener('mouseup', onMouseup)\n  const stepButtons = document.getElementsByClassName('step-button')\n  for (const button of stepButtons) {\n    button.addEventListener('mouseenter', toggleButtonCB)\n    button.addEventListener('mousedown', onMousedownCB)\n  }\n}\n\nexport default function addEventHandlers(metronome: Metronome) {\n  addEventHandlersToControls(metronome)\n  addEventHandlersToMatrix(metronome)\n}\n","import renderMatrix from './renderers'\nimport addEventHandlers from './events'\nimport Metronome from '../metronome'\n\nexport function render({\n  notes,\n  metronome,\n}: {\n  notes: string[]\n  metronome: Metronome\n}) {\n  renderMatrix(notes)\n  addEventHandlers(metronome)\n}\n\nexport function drawPlayingCues(prevStep: number, nextStep?: number) {\n  if (prevStep !== undefined) {\n    const elsToStopPlaying = [\n      ...document.getElementsByClassName(`col-${prevStep}`),\n    ]\n    for (const el of elsToStopPlaying) {\n      el.classList.remove('playing')\n    }\n  }\n  if (nextStep !== undefined) {\n    const elsToPlay = [...document.getElementsByClassName(`col-${nextStep}`)]\n    for (const el of elsToPlay) {\n      el.classList.add('playing')\n    }\n  }\n}\n\nexport async function removePlayingCues() {\n  const elsToStopPlaying = [...document.getElementsByClassName('playing')]\n  for (const el of elsToStopPlaying) {\n    el.classList.remove('playing')\n  }\n}\n","import { NOTES_TO_HZ } from './notes'\n// figured out by trial and error\nconst gains = {\n  1: 1 / 1 - 0.5,\n  2: 1 / 2 - 0.25,\n  3: 1 / 3 - 0.1,\n  4: 1 / 4 - 0.1,\n  5: 1 / 5 - 0.1,\n  6: 1 / 6 - 0.1,\n  7: 1 / 7 - 0.05,\n  8: 1 / 8 - 0.05,\n  9: 1 / 9 - 0.05,\n  10: 1 / 10 - 0.05,\n  11: 1 / 11 - 0.05,\n  12: 1 / 12 - 0.05,\n  13: 1 / 13 - 0.05,\n  14: 1 / 14 - 0.1,\n  15: 1 / 15 - 0.1,\n  16: 1 / 16 - 0.1,\n}\n\nfunction createAndSetupOscNode({\n  hz,\n  audioCtx,\n  gain,\n}: {\n  hz: number\n  audioCtx: AudioContext\n  gain: GainNode\n}) {\n  const osc = audioCtx.createOscillator()\n  osc.frequency.value = hz\n  osc.connect(gain)\n  return osc\n}\n\nexport function playNote({\n  note,\n  audioCtx,\n}: {\n  note: string\n  audioCtx: AudioContext\n}) {\n  const gainNode = audioCtx.createGain()\n  gainNode.connect(audioCtx.destination)\n  gainNode.gain.setTargetAtTime(0, audioCtx.currentTime, 0)\n  const osc = createAndSetupOscNode({\n    hz: NOTES_TO_HZ[note],\n    audioCtx,\n    gain: gainNode,\n  })\n  osc.start(audioCtx.currentTime)\n  gainNode.gain.setTargetAtTime(0.4, audioCtx.currentTime, 0.05)\n  gainNode.gain.setTargetAtTime(0.0001, audioCtx.currentTime + 0.25, 0.125)\n  osc.stop(audioCtx.currentTime + 1)\n}\n\ninterface PlayNotesAtTimeOptions {\n  notes: string[]\n  duration: number\n  audioCtx: AudioContext\n}\n\nexport function playNotesAtTime({\n  notes,\n  duration,\n  audioCtx,\n}: PlayNotesAtTimeOptions) {\n  if (!notes.length) {\n    return\n  }\n  const targetGain = gains[notes.length]\n  const gainNode = audioCtx.createGain()\n  const sourceNodes = notes.map((note) =>\n    createAndSetupOscNode({ hz: NOTES_TO_HZ[note], audioCtx, gain: gainNode }),\n  )\n  gainNode.gain.setTargetAtTime(0, audioCtx.currentTime, 0)\n  gainNode.connect(audioCtx.destination)\n  sourceNodes.forEach((sn) => sn.start())\n  gainNode.gain.setTargetAtTime(targetGain, audioCtx.currentTime, 0.05)\n  gainNode.gain.setTargetAtTime(\n    0.0001,\n    audioCtx.currentTime + duration * 2,\n    0.125,\n  )\n  sourceNodes.forEach((sn) => sn.stop(audioCtx.currentTime + duration * 10))\n}\n","import { playNotesAtTime, playNote } from '../audio'\nimport { drawPlayingCues, removePlayingCues } from '../matrix'\n\nfunction stepPerSec(bpm = 128) {\n  return ((60 / bpm) * 4) / 16\n}\n\nfunction stepPerMs(bpm = 128) {\n  return stepPerSec(bpm) * 1000\n}\n\nexport default class Metronome {\n  bpm: number\n  isOn: boolean\n  step: number\n  prevStep: number\n  notes: string[]\n  matrix: boolean[][]\n  interval: NodeJS.Timer | null\n  audioCtx: AudioContext\n  hasDrawnCues: boolean\n  constructor(notes: string[]) {\n    const AudioContext =\n      window.AudioContext || (window as any).webkitAudioContext\n    this.bpm = 128\n    this.isOn = false\n    this.step = null\n    this.notes = notes\n    this.interval = null\n    this.audioCtx = new AudioContext() as AudioContext\n    this.hasDrawnCues = false\n    this.matrix = notes.map(() => new Array(notes.length).fill(false))\n  }\n\n  toggleMatrix(row: number, col: number) {\n    const { matrix, notes, audioCtx } = this\n    const isOn = !matrix[row][col]\n    matrix[row][col] = isOn\n    if (isOn) {\n      playNote({ note: notes[row], audioCtx })\n    }\n  }\n\n  play() {\n    const { intervalCb, bpm } = this\n    this.interval = setInterval(intervalCb, stepPerMs(bpm))\n    this.isOn = true\n  }\n\n  pause() {\n    const { interval } = this\n    interval && clearInterval(interval)\n    this.isOn = false\n  }\n\n  stop() {\n    this.pause()\n    this.step = null\n    this.prevStep = null\n    removePlayingCues()\n  }\n\n  // private methods\n  private intervalCb = () => {\n    const { step } = this\n    if (step === null || step === 15) {\n      this.step = 0\n    } else {\n      this.step += 1\n    }\n    this.prevStep = step\n    this.hasDrawnCues = false\n    this.scheduleNotesToPlay()\n    this.draw()\n  }\n\n  private getNotesAtCurrentStep() {\n    const { step, notes, matrix } = this\n    const onNotes: string[] = []\n    for (let i = 0; i < matrix.length; i++) {\n      const isOn = matrix[i][step]\n      if (isOn) {\n        onNotes.push(notes[i])\n      }\n    }\n    return onNotes\n  }\n\n  private scheduleNotesToPlay() {\n    const { audioCtx, bpm } = this\n    const notes = this.getNotesAtCurrentStep()\n    playNotesAtTime({ notes, duration: stepPerSec(bpm), audioCtx })\n  }\n\n  private draw = () => {\n    const { prevStep, step, draw, isOn } = this\n    if (!this.hasDrawnCues) {\n      drawPlayingCues(prevStep, step)\n      this.hasDrawnCues = true\n    }\n    if (isOn) {\n      requestAnimationFrame(draw)\n    }\n  }\n}\n","import { NOTES } from './audio/notes'\nimport { render } from './matrix'\nimport Metronome from './metronome'\n\nfunction onReady(fn) {\n  if (document.readyState !== 'loading') {\n    fn()\n  } else {\n    document.addEventListener('DOMContentLoaded', () => fn())\n  }\n}\n\nfunction renderJsMatrix() {\n  const metronome = new Metronome(NOTES)\n  render({ notes: NOTES, metronome })\n}\n\nonReady(renderJsMatrix)\n"]}