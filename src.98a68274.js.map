{"version":3,"sources":["audio/notes.ts","matrix/renderers.ts","matrix/events.ts","matrix/index.ts","audio/index.ts","metronome/index.ts","index.ts"],"names":[],"mappings":";AAmBa,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAnBA,QAAA,MAAQ,CACnB,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MAGW,QAAA,YAAc,CACzB,GAAI,MACG,MAAA,MACP,IAAK,MACL,GAAI,MACG,MAAA,MACP,IAAK,MACL,GAAI,KACJ,GAAI,MACG,MAAA,MACP,IAAK,MACL,GAAI,KACG,MAAA,MACP,IAAK,MACL,GAAI,KACG,MAAA,MACP,IAAK,MACL,GAAI,MACJ,GAAI,KACG,MAAA,MACP,IAAK,MACL,GAAI,MACG,MAAA,MACP,IAAK,MACL,GAAI,KACJ,GAAI,MACG,MAAA,MACP,IAAK,MACL,GAAI,GACG,MAAA,MACP,IAAK,MACL,GAAI,GACG,MAAA,MACP,IAAK,MACL,GAAI,MACJ,GAAI,MACG,MAAA,KACP,IAAK,KACL,GAAI,MACG,MAAA,MACP,IAAK,MACL,GAAI,MACJ,GAAI,MACG,MAAA,KACP,IAAK,KACL,GAAI,GACG,MAAA,OACP,IAAK,OACL,GAAI,IACG,MAAA,OACP,IAAK,OACL,GAAI,OACJ,GAAI,OACG,MAAA,OACP,IAAK,OACL,GAAI,OACG,MAAA,OACP,IAAK,OACL,GAAI,OACJ,GAAI,OACG,MAAA,IACP,IAAK,IACL,GAAI,IACG,MAAA,OACP,IAAK,OACL,GAAI,IACG,MAAA,OACP,IAAK,OACL,GAAI,OACJ,GAAI,OACG,MAAA,OACP,IAAK,OACL,GAAI,OACG,MAAA,OACP,IAAK,OACL,GAAI,OACJ,GAAI,OACG,MAAA,OACP,IAAK,OACL,GAAI,IACG,MAAA,MACP,IAAK,MACL,GAAI,IACG,MAAA,OACP,IAAK,OACL,GAAI,OACJ,GAAI,OACG,MAAA,OACP,IAAK,OACL,GAAI,OACG,MAAA,OACP,IAAK,OACL,GAAI,OACJ,GAAI,OACG,MAAA,OACP,IAAK,OACL,GAAI,OACG,MAAA,OACP,IAAK,OACL,GAAI,IACG,MAAA,OACP,IAAK,OACL,GAAI,OACJ,GAAI,OACG,MAAA,QACP,IAAK,QACL,GAAI,QACG,MAAA,QACP,IAAK,QACL,GAAI,QACJ,GAAI,QACG,MAAA,QACP,IAAK,QACL,GAAI,QACG,MAAA,QACP,IAAK,QACL,GAAI,KACG,MAAA,QACP,IAAK,QACL,GAAI,QACJ,GAAI,KACG,MAAA,QACP,IAAK,QACL,GAAI,QACG,MAAA,QACP,IAAK,QACL,GAAI,QACJ,GAAI,QACG,MAAA,QACP,IAAK,QACL,GAAI,QACG,MAAA,QACP,IAAK,QACL,GAAI,KACG,MAAA,QACP,IAAK,QACL,GAAI,QACJ,GAAI;;AC9GN,aA9CA,SAAS,EAAa,EAAa,GAC3B,IAAA,EAAS,SAAS,cAAc,UAK/B,OAJP,EAAO,UAAU,IAAI,eACrB,EAAO,UAAU,IAAI,OAAO,GAC5B,EAAO,QAAQ,IAAM,OAAO,GAC5B,EAAO,QAAQ,IAAM,OAAO,GACrB,EAGT,SAAS,IACD,IAAA,EAAO,SAAS,cAAc,QAE7B,OADP,EAAK,UAAU,IAAI,gBACZ,EAGT,SAAS,EAAkB,GACnB,IAAA,EAAK,SAAS,cAAc,MAG3B,OAFP,EAAG,UAAU,IAAI,cACjB,EAAG,YAAc,EACV,EAGT,SAAS,EAAY,GACnB,IAAA,EAAA,EAAA,KACA,EAAA,EAAA,IACA,EAAA,EAAA,OAMM,EAAQ,SAAS,cAAc,OACrC,EAAM,UAAU,IAAI,SACd,IAAA,EAAK,EAAkB,GAC7B,EAAM,OAAO,GACP,IAAA,EAAO,IACb,EAAM,OAAO,GAER,IADC,IAAA,EAAU,GACP,EAAM,EAAG,EAAM,EAAQ,IAC9B,EAAQ,KAAK,EAAa,EAAK,IAI1B,OAFP,EAAK,OAAM,MAAX,EAAe,GAER,EAGT,SAAwB,EAAa,GAE9B,IADC,IAAA,EAAa,SAAS,yBACnB,EAAM,EAAG,EAAM,EAAM,OAAQ,IAAO,CACrC,IACA,EAAQ,EAAY,CAAE,KADf,EAAM,GACe,IAAG,EAAE,OAAQ,EAAM,SACrD,EAAW,OAAO,GAEJ,SAAS,eAAe,kBAChC,OAAO,GARjB,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA;;ACwCA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IApFA,IAAI,GAAU,EACV,GAAc,EACZ,EACJ,kKACI,EACJ,gSAEF,SAAS,EAAW,GACX,OAAA,WACC,IAAA,EAAa,SAAS,eAAe,QACrC,EAAO,EAAW,UAAU,SAAS,MAC3C,EAAW,UAAU,OAAO,MACxB,GACF,EAAW,UAAY,EACvB,EAAU,UAEV,EAAW,UAAY,EACvB,EAAU,SAKhB,SAAS,EAAQ,GACR,OAAA,WACC,IAAA,EAAa,SAAS,eAAe,QAC9B,EAAW,UAAU,SAAS,QAEzC,EAAW,UAAU,OAAO,MAC5B,EAAW,UAAY,GAEzB,EAAU,QAId,SAAS,EAA2B,GAC5B,IAAA,EAAa,SAAS,eAAe,QACrC,EAAa,SAAS,eAAe,QAC3C,EAAW,iBAAiB,QAAS,EAAW,IAChD,EAAW,iBAAiB,QAAS,EAAQ,IAG/C,SAAS,EAAY,GACZ,OAAA,SAAC,GACN,GAAU,EACJ,IAAA,EAAS,EAAE,OACjB,GAAe,EAAO,UAAU,SAAS,MACzC,EAAO,UAAU,OAAO,MAClB,IAAA,EAAM,OAAO,EAAO,QAAQ,KAC5B,EAAM,OAAO,EAAO,QAAQ,KAClC,EAAU,aAAa,EAAK,IAIhC,SAAS,IACP,GAAU,EAGZ,SAAS,EAAyB,GACzB,OAAA,SAAC,GACF,IAAA,EAAA,CAGE,IAAA,EAAS,EAAE,OACX,EAAO,EAAO,UAAU,SAAS,MAClC,GAAA,IAAS,IAAkB,GAAQ,EAAc,CACpD,EAAO,UAAU,OAAO,MAClB,IAAA,EAAM,OAAO,EAAO,QAAQ,KAC5B,EAAM,OAAO,EAAO,QAAQ,KAClC,EAAU,aAAa,EAAK,MAKlC,SAAS,EAAyB,GAC1B,IAAA,EAAiB,EAAyB,GAC1C,EAAgB,EAAY,GAClC,SAAS,KAAK,iBAAiB,UAAW,GAErB,IADf,IACe,EAAA,EAAA,EADD,SAAS,uBAAuB,eAC/B,EAAA,EAAA,OAAA,IAAa,CAAvB,IAAA,EAAM,EAAA,GACf,EAAO,iBAAiB,aAAc,GACtC,EAAO,iBAAiB,YAAa,IAIzC,SAAwB,EAAiB,GACvC,EAA2B,GAC3B,EAAyB,GAF3B,QAAA,QAAA;;ACtDA,aAAA,IAAA,EAAA,MAAA,KAAA,WAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,IAAA,IAAA,EAAA,UAAA,SAAA,EAAA,GAAA,SAAA,EAAA,GAAA,IAAA,EAAA,EAAA,KAAA,IAAA,MAAA,GAAA,EAAA,IAAA,SAAA,EAAA,GAAA,IAAA,EAAA,EAAA,MAAA,IAAA,MAAA,GAAA,EAAA,IAAA,SAAA,EAAA,GAAA,IAAA,EAAA,EAAA,KAAA,EAAA,EAAA,QAAA,EAAA,EAAA,MAAA,aAAA,EAAA,EAAA,IAAA,EAAA,SAAA,GAAA,EAAA,MAAA,KAAA,EAAA,GAAA,GAAA,EAAA,EAAA,MAAA,EAAA,GAAA,KAAA,WAAA,EAAA,MAAA,KAAA,aAAA,SAAA,EAAA,GAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,CAAA,MAAA,EAAA,KAAA,WAAA,GAAA,EAAA,EAAA,GAAA,MAAA,EAAA,GAAA,OAAA,EAAA,IAAA,KAAA,GAAA,IAAA,IAAA,OAAA,EAAA,CAAA,KAAA,EAAA,GAAA,MAAA,EAAA,GAAA,OAAA,EAAA,IAAA,mBAAA,SAAA,EAAA,OAAA,UAAA,WAAA,OAAA,OAAA,EAAA,SAAA,EAAA,GAAA,OAAA,SAAA,GAAA,OAAA,SAAA,GAAA,GAAA,EAAA,MAAA,IAAA,UAAA,mCAAA,KAAA,GAAA,IAAA,GAAA,EAAA,EAAA,IAAA,EAAA,EAAA,EAAA,GAAA,EAAA,OAAA,EAAA,GAAA,EAAA,SAAA,EAAA,EAAA,SAAA,EAAA,KAAA,GAAA,GAAA,EAAA,SAAA,EAAA,EAAA,KAAA,EAAA,EAAA,KAAA,KAAA,OAAA,EAAA,OAAA,EAAA,EAAA,IAAA,EAAA,CAAA,EAAA,EAAA,GAAA,EAAA,QAAA,EAAA,IAAA,KAAA,EAAA,KAAA,EAAA,EAAA,EAAA,MAAA,KAAA,EAAA,OAAA,EAAA,QAAA,CAAA,MAAA,EAAA,GAAA,MAAA,GAAA,KAAA,EAAA,EAAA,QAAA,EAAA,EAAA,GAAA,EAAA,CAAA,GAAA,SAAA,KAAA,EAAA,EAAA,EAAA,IAAA,MAAA,EAAA,KAAA,MAAA,SAAA,QAAA,KAAA,GAAA,EAAA,EAAA,MAAA,OAAA,GAAA,EAAA,EAAA,OAAA,MAAA,IAAA,EAAA,IAAA,IAAA,EAAA,IAAA,CAAA,EAAA,EAAA,SAAA,GAAA,IAAA,EAAA,MAAA,GAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EAAA,IAAA,CAAA,EAAA,MAAA,EAAA,GAAA,MAAA,GAAA,IAAA,EAAA,IAAA,EAAA,MAAA,EAAA,GAAA,CAAA,EAAA,MAAA,EAAA,GAAA,EAAA,EAAA,MAAA,GAAA,GAAA,EAAA,MAAA,EAAA,GAAA,CAAA,EAAA,MAAA,EAAA,GAAA,EAAA,IAAA,KAAA,GAAA,MAAA,EAAA,IAAA,EAAA,IAAA,MAAA,EAAA,KAAA,MAAA,SAAA,EAAA,EAAA,KAAA,EAAA,GAAA,MAAA,GAAA,EAAA,CAAA,EAAA,GAAA,EAAA,EAAA,QAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EAAA,GAAA,MAAA,EAAA,GAAA,MAAA,CAAA,MAAA,EAAA,GAAA,EAAA,QAAA,EAAA,MAAA,GAAA,CAAA,CAAA,EAAA,OAAA,EAAA,MAAA,KAAA,gBAAA,WAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,UAAA,OAAA,EAAA,EAAA,IAAA,GAAA,UAAA,GAAA,OAAA,IAAA,EAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,EAAA,EAAA,EAAA,IAAA,IAAA,IAAA,EAAA,UAAA,GAAA,EAAA,EAAA,EAAA,EAAA,OAAA,EAAA,EAAA,IAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,GAAA,EAAA,MAAA,KAAA,iBAAA,SAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,IAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAhCA,IAAA,EAAA,EAAA,QAAA,gBACA,EAAA,EAAA,QAAA,aAGA,SAAgB,EAAO,GACrB,IAAA,EAAA,EAAA,MACA,EAAA,EAAA,UAKA,EAAA,QAAa,GACb,EAAA,QAAiB,GAGnB,SAAgB,EAAgB,EAAkB,GAC5C,QAAa,IAAb,EAIe,IAHX,IAGW,EAAA,EAAA,EAHK,EACjB,SAAS,uBAAuB,OAAO,IAE3B,EAAA,EAAA,OAAA,IAAkB,CAAtB,EAAA,GACR,UAAU,OAAO,WAGpB,QAAa,IAAb,EAEe,IADX,IACW,EAAA,EAAA,EADF,EAAO,SAAS,uBAAuB,OAAO,IAC5C,EAAA,EAAA,OAAA,IAAW,CAAf,EAAA,GACR,UAAU,IAAI,YAKvB,SAAsB,IAAtB,OAAA,EAAA,UAAA,OAAA,EAAA,WAAA,IAAA,EAAA,EAAA,EAAA,OAAA,EAAA,KAAA,SAAA,GAEE,IADM,EAAgB,EAAO,SAAS,uBAAuB,YAC7D,EAAA,EAAiB,EAAA,EAAA,EAAA,EAAA,OAAA,IAAJ,EAAA,GACR,UAAU,OAAO,WAHxB,MAAA,CAAA,OA5BA,QAAA,OAAA,EAWA,QAAA,gBAAA,EAiBA,QAAA,kBAAA;;AC+BA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IA/DA,IAAA,EAAA,QAAA,WAEM,EAAQ,CACT,EAAA,GACA,EAAA,IACA,EAAA,EAAI,EAAI,GACR,EAAA,IACA,EAAA,GACA,EAAA,EAAI,EAAI,GACR,EAAA,EAAI,EAAI,IACR,EAAA,KACA,EAAA,EAAI,EAAI,IACP,GAAA,IACA,GAAA,EAAI,GAAK,IACT,GAAA,EAAI,GAAK,IACT,GAAA,EAAI,GAAK,IACT,GAAA,EAAI,GAAK,GACT,GAAA,EAAI,GAAK,GACT,GAAA,EAAI,GAAK,IAGf,SAAS,EAAsB,GAC7B,IAAA,EAAA,EAAA,GACA,EAAA,EAAA,SACA,EAAA,EAAA,KAMM,EAAM,EAAS,mBAGd,OAFP,EAAI,UAAU,MAAQ,EACtB,EAAI,QAAQ,GACL,EAGT,SAAgB,EAAS,GACvB,IAAA,EAAA,EAAA,KACA,EAAA,EAAA,SAKM,EAAW,EAAS,aAC1B,EAAS,QAAQ,EAAS,aAC1B,EAAS,KAAK,gBAAgB,EAAG,EAAS,YAAa,GACjD,IAAA,EAAM,EAAsB,CAChC,GAAI,EAAA,YAAY,GAChB,SAAQ,EACR,KAAM,IAER,EAAI,MAAM,EAAS,aACnB,EAAS,KAAK,gBAAgB,GAAK,EAAS,YAAa,KACzD,EAAS,KAAK,gBAAgB,KAAQ,EAAS,YAAc,IAAM,MACnE,EAAI,KAAK,EAAS,YAAc,GASlC,SAAgB,EAAgB,GAC9B,IAAA,EAAA,EAAA,MACA,EAAA,EAAA,SACA,EAAA,EAAA,SAEI,GAAC,EAAM,OAAP,CAGE,IAAA,EAAa,EAAM,EAAM,QACzB,EAAW,EAAS,aACpB,EAAc,EAAM,IAAI,SAAC,GAC7B,OAAA,EAAsB,CAAE,GAAI,EAAA,YAAY,GAAO,SAAQ,EAAE,KAAM,MAEjE,EAAS,KAAK,gBAAgB,EAAG,EAAS,YAAa,GACvD,EAAS,QAAQ,EAAS,aAC1B,EAAY,QAAQ,SAAC,GAAO,OAAA,EAAG,UAC/B,EAAS,KAAK,gBAAgB,EAAY,EAAS,YAAa,KAChE,EAAS,KAAK,gBACZ,KACA,EAAS,YAAyB,EAAX,EACvB,MAEF,EAAY,QAAQ,SAAC,GAAO,OAAA,EAAG,KAAK,EAAS,YAAyB,GAAX,MAjD7D,QAAA,SAAA,EA2BA,QAAA,gBAAA;;ACpDA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAXA,IAAA,EAAA,QAAA,YACA,EAAA,QAAA,aAEA,SAAS,EAAW,GACT,YADS,IAAA,IAAA,EAAA,KACT,GAAK,EAAO,EAAK,GAG5B,SAAS,EAAU,GACV,YADU,IAAA,IAAA,EAAA,KACQ,IAAlB,EAAW,GAGpB,IAAA,EAAA,WAUE,SAAA,EAAY,GAAZ,IAAA,EAAA,KA0CQ,KAAA,WAAa,WACX,IAAA,EAAA,EAAA,KACK,OAAT,GAA0B,KAAT,EACnB,EAAK,KAAO,EAEZ,EAAK,MAAQ,EAEf,EAAK,SAAW,EAChB,EAAK,cAAe,EACpB,EAAK,sBACL,EAAK,QAqBC,KAAA,KAAO,WACP,IAAA,EAAA,EAAE,EAAA,EAAA,SAAU,EAAA,EAAA,KAAM,EAAA,EAAA,KAAM,EAAA,EAAA,KACzB,EAAK,eACR,EAAA,gBAAgB,EAAU,GAC1B,EAAK,cAAe,GAElB,GACF,sBAAsB,IA/ElB,IAAA,EACJ,OAAO,cAAiB,OAAe,mBACpC,KAAA,IAAM,IACN,KAAA,MAAO,EACP,KAAA,KAAO,KACP,KAAA,MAAQ,EACR,KAAA,SAAW,KACX,KAAA,SAAW,IAAI,EACf,KAAA,cAAe,EACf,KAAA,OAAS,EAAM,IAAI,WAAM,OAAA,IAAI,MAAM,EAAM,QAAQ,MAAK,KAyE/D,OAtEE,EAAA,UAAA,aAAA,SAAa,EAAa,GAClB,IAAE,EAAF,KAAE,OAAQ,EAAV,KAAU,MAAO,EAAjB,KAAiB,SACjB,GAAQ,EAAO,GAAK,GAC1B,EAAO,GAAK,GAAO,EACf,GACF,EAAA,SAAS,CAAE,KAAM,EAAM,GAAM,SAAQ,KAIzC,EAAA,UAAA,KAAA,WACQ,IAAE,EAAF,KAAE,WAAY,EAAd,KAAc,IACf,KAAA,SAAW,YAAY,EAAY,EAAU,IAC7C,KAAA,MAAO,GAGd,EAAA,UAAA,MAAA,WACU,IAAA,EAAA,KAAA,SACR,GAAY,cAAc,GACrB,KAAA,MAAO,GAGd,EAAA,UAAA,KAAA,WACO,KAAA,QACA,KAAA,KAAO,KACP,KAAA,SAAW,KAChB,EAAA,qBAiBM,EAAA,UAAA,sBAAR,WAGO,IAFC,IAAE,EAAF,KAAE,KAAM,EAAR,KAAQ,MAAO,EAAf,KAAe,OACf,EAAoB,GACjB,EAAI,EAAG,EAAI,EAAO,OAAQ,IAAK,CACzB,EAAO,GAAG,IAErB,EAAQ,KAAK,EAAM,IAGhB,OAAA,GAGD,EAAA,UAAA,oBAAR,WACQ,IAAE,EAAF,KAAE,SAAU,EAAZ,KAAY,IACZ,EAAQ,KAAK,wBACnB,EAAA,gBAAgB,CAAE,MAAK,EAAE,SAAU,EAAW,GAAM,SAAQ,KAahE,EA7FA,GAAA,QAAA,QAAA;;ACMA,aAAA,IAAA,EAAA,MAAA,KAAA,iBAAA,SAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,IAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAjBA,IAAA,EAAA,QAAA,iBACA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,gBAEA,SAAS,EAAQ,GACa,YAAxB,SAAS,WACX,IAEA,SAAS,iBAAiB,mBAAoB,WAAM,OAAA,MAIxD,SAAS,IACD,IAAA,EAAY,IAAI,EAAA,QAAU,EAAA,OAChC,EAAA,OAAO,CAAE,MAAO,EAAA,MAAO,UAAS,IAGlC,EAAQ","file":"src.98a68274.js","sourceRoot":"../src","sourcesContent":["export const NOTES = [\n  'D5',\n  'C5',\n  'B4',\n  'A4',\n  'G4',\n  'F4',\n  'E4',\n  'D4',\n  'C4',\n  'B3',\n  'A3',\n  'G3',\n  'F3',\n  'E3',\n  'D3',\n  'C3',\n]\n\nexport const NOTES_TO_HZ = {\n  C0: 16.35,\n  'C#0': 17.32,\n  Db0: 17.32,\n  D0: 18.35,\n  'D#0': 19.45,\n  Eb0: 19.45,\n  E0: 20.6,\n  F0: 21.83,\n  'F#0': 23.12,\n  Gb0: 23.12,\n  G0: 24.5,\n  'G#0': 25.96,\n  Ab0: 25.96,\n  A0: 27.5,\n  'A#0': 29.14,\n  Bb0: 29.14,\n  B0: 30.87,\n  C1: 32.7,\n  'C#1': 34.65,\n  Db1: 34.65,\n  D1: 36.71,\n  'D#1': 38.89,\n  Eb1: 38.89,\n  E1: 41.2,\n  F1: 43.65,\n  'F#1': 46.25,\n  Gb1: 46.25,\n  G1: 49.0,\n  'G#1': 51.91,\n  Ab1: 51.91,\n  A1: 55.0,\n  'A#1': 58.27,\n  Bb1: 58.27,\n  B1: 61.74,\n  C2: 65.41,\n  'C#2': 69.3,\n  Db2: 69.3,\n  D2: 73.42,\n  'D#2': 77.78,\n  Eb2: 77.78,\n  E2: 82.41,\n  F2: 87.31,\n  'F#2': 92.5,\n  Gb2: 92.5,\n  G2: 98.0,\n  'G#2': 103.83,\n  Ab2: 103.83,\n  A2: 110.0,\n  'A#2': 116.54,\n  Bb2: 116.54,\n  B2: 123.47,\n  C3: 130.81,\n  'C#3': 138.59,\n  Db3: 138.59,\n  D3: 146.83,\n  'D#3': 155.56,\n  Eb3: 155.56,\n  E3: 164.81,\n  F3: 174.61,\n  'F#3': 185.0,\n  Gb3: 185.0,\n  G3: 196.0,\n  'G#3': 207.65,\n  Ab3: 207.65,\n  A3: 220.0,\n  'A#3': 233.08,\n  Bb3: 233.08,\n  B3: 246.94,\n  C4: 261.63,\n  'C#4': 277.18,\n  Db4: 277.18,\n  D4: 293.66,\n  'D#4': 311.13,\n  Eb4: 311.13,\n  E4: 329.63,\n  F4: 349.23,\n  'F#4': 369.99,\n  Gb4: 369.99,\n  G4: 392.0,\n  'G#4': 415.3,\n  Ab4: 415.3,\n  A4: 440.0,\n  'A#4': 466.16,\n  Bb4: 466.16,\n  B4: 493.88,\n  C5: 523.25,\n  'C#5': 554.37,\n  Db5: 554.37,\n  D5: 587.33,\n  'D#5': 622.25,\n  Eb5: 622.25,\n  E5: 659.26,\n  F5: 698.46,\n  'F#5': 739.99,\n  Gb5: 739.99,\n  G5: 783.99,\n  'G#5': 830.61,\n  Ab5: 830.61,\n  A5: 880.0,\n  'A#5': 932.33,\n  Bb5: 932.33,\n  B5: 987.77,\n  C6: 1046.5,\n  'C#6': 1108.73,\n  Db6: 1108.73,\n  D6: 1174.66,\n  'D#6': 1244.51,\n  Eb6: 1244.51,\n  E6: 1318.51,\n  F6: 1396.91,\n  'F#6': 1479.98,\n  Gb6: 1479.98,\n  G6: 1567.98,\n  'G#6': 1661.22,\n  Ab6: 1661.22,\n  A6: 1760.0,\n  'A#6': 1864.66,\n  Bb6: 1864.66,\n  B6: 1975.53,\n  C7: 2093.0,\n  'C#7': 2217.46,\n  Db7: 2217.46,\n  D7: 2349.32,\n  'D#7': 2489.02,\n  Eb7: 2489.02,\n  E7: 2637.02,\n  F7: 2793.83,\n  'F#7': 2959.96,\n  Gb7: 2959.96,\n  G7: 3135.96,\n  'G#7': 3322.44,\n  Ab7: 3322.44,\n  A7: 3520.0,\n  'A#7': 3729.31,\n  Bb7: 3729.31,\n  B7: 3951.07,\n  C8: 4186.01,\n}\n","function createButton(row: number, col: number) {\n  const button = document.createElement('button')\n  button.classList.add('step-button')\n  button.classList.add(`col-${col}`)\n  button.dataset.row = String(row)\n  button.dataset.col = String(col)\n  return button\n}\n\nfunction createSpanButton() {\n  const span = document.createElement('span')\n  span.classList.add('step-buttons')\n  return span\n}\n\nfunction createTrackNameH3(name: string) {\n  const h3 = document.createElement('h3')\n  h3.classList.add('track-name')\n  h3.textContent = name\n  return h3\n}\n\nfunction createTrack({\n  note,\n  row,\n  length,\n}: {\n  note: string\n  row: number\n  length: number\n}) {\n  const track = document.createElement('div')\n  track.classList.add('track')\n  const h3 = createTrackNameH3(note)\n  track.append(h3)\n  const span = createSpanButton()\n  track.append(span)\n  const buttons = []\n  for (let col = 0; col < length; col++) {\n    buttons.push(createButton(row, col))\n  }\n  span.append(...buttons)\n\n  return track\n}\n\nexport default function renderMatrix(notes: string[]) {\n  const matrixFrag = document.createDocumentFragment()\n  for (let row = 0; row < notes.length; row++) {\n    const note = notes[row]\n    const track = createTrack({ note, row, length: notes.length })\n    matrixFrag.append(track)\n  }\n  const section = document.getElementById('matrix-section')\n  section.append(matrixFrag)\n}\n","import Metronome from '../metronome'\n\nlet mouseup = true\nlet isTurningOn = true\nconst playSVGStr =\n  '<svg width=\"20\" height=\"20\" viewBox=\"0 0 494.942 494.942\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m35.353 0 424.236 247.471-424.236 247.471z\"></path></svg>'\nconst pauseSVGStr =\n  '<svg width=\"15\" height=\"15\" viewBox=\"0 0 424.236 424.236\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m247.471 0h176.765v424.236h-176.765z\" id=\"path-1_5_\" transform=\"translate(9 2)\"></path><path id=\"path-1_4_\" d=\"m0 0h176.765v424.236h-176.765z\" transform=\"translate(2 2)\"></path></svg>'\n\nfunction togglePlay(metronome: Metronome) {\n  return () => {\n    const playButton = document.getElementById('play')\n    const isOn = playButton.classList.contains('on')\n    playButton.classList.toggle('on')\n    if (isOn) {\n      playButton.innerHTML = playSVGStr\n      metronome.pause()\n    } else {\n      playButton.innerHTML = pauseSVGStr\n      metronome.play()\n    }\n  }\n}\n\nfunction turnOff(metronome: Metronome) {\n  return () => {\n    const playButton = document.getElementById('play')\n    const isOn = playButton.classList.contains('on')\n    if (isOn) {\n      playButton.classList.toggle('on')\n      playButton.innerHTML = playSVGStr\n    }\n    metronome.stop()\n  }\n}\n\nfunction addEventHandlersToControls(metronome: Metronome) {\n  const playButton = document.getElementById('play')\n  const stopButton = document.getElementById('stop')\n  playButton.addEventListener('click', togglePlay(metronome))\n  stopButton.addEventListener('click', turnOff(metronome))\n}\n\nfunction onMousedown(metronome: Metronome) {\n  return (e: MouseEvent) => {\n    mouseup = false\n    const button = e.target as HTMLElement\n    isTurningOn = !button.classList.contains('on')\n    button.classList.toggle('on')\n    const row = Number(button.dataset.row)\n    const col = Number(button.dataset.col)\n    metronome.toggleMatrix(row, col)\n  }\n}\n\nfunction onMouseup() {\n  mouseup = true\n}\n\nfunction toggleButtonOnMouseEnter(metronome: Metronome) {\n  return (e: MouseEvent) => {\n    if (mouseup) {\n      return\n    }\n    const button = e.target as HTMLElement\n    const isOn = button.classList.contains('on')\n    if ((isOn && !isTurningOn) || (!isOn && isTurningOn)) {\n      button.classList.toggle('on')\n      const row = Number(button.dataset.row)\n      const col = Number(button.dataset.col)\n      metronome.toggleMatrix(row, col)\n    }\n  }\n}\n\nfunction addEventHandlersToMatrix(metronome: Metronome) {\n  const toggleButtonCB = toggleButtonOnMouseEnter(metronome) as EventListener\n  const onMousedownCB = onMousedown(metronome) as EventListener\n  document.body.addEventListener('mouseup', onMouseup)\n  const stepButtons = document.getElementsByClassName('step-button')\n  for (const button of stepButtons) {\n    button.addEventListener('mouseenter', toggleButtonCB)\n    button.addEventListener('mousedown', onMousedownCB)\n  }\n}\n\nexport default function addEventHandlers(metronome: Metronome) {\n  addEventHandlersToControls(metronome)\n  addEventHandlersToMatrix(metronome)\n}\n","import renderMatrix from './renderers'\nimport addEventHandlers from './events'\nimport Metronome from '../metronome'\n\nexport function render({\n  notes,\n  metronome,\n}: {\n  notes: string[]\n  metronome: Metronome\n}) {\n  renderMatrix(notes)\n  addEventHandlers(metronome)\n}\n\nexport function drawPlayingCues(prevStep: number, nextStep?: number) {\n  if (prevStep !== undefined) {\n    const elsToStopPlaying = [\n      ...document.getElementsByClassName(`col-${prevStep}`),\n    ]\n    for (const el of elsToStopPlaying) {\n      el.classList.remove('playing')\n    }\n  }\n  if (nextStep !== undefined) {\n    const elsToPlay = [...document.getElementsByClassName(`col-${nextStep}`)]\n    for (const el of elsToPlay) {\n      el.classList.add('playing')\n    }\n  }\n}\n\nexport async function removePlayingCues() {\n  const elsToStopPlaying = [...document.getElementsByClassName('playing')]\n  for (const el of elsToStopPlaying) {\n    el.classList.remove('playing')\n  }\n}\n","import { NOTES_TO_HZ } from './notes'\n// figured out by trial and error\nconst gains = {\n  1: 1 / 1 - 0.5,\n  2: 1 / 2 - 0.25,\n  3: 1 / 3 - 0.1,\n  4: 1 / 4 - 0.1,\n  5: 1 / 5 - 0.1,\n  6: 1 / 6 - 0.1,\n  7: 1 / 7 - 0.05,\n  8: 1 / 8 - 0.05,\n  9: 1 / 9 - 0.05,\n  10: 1 / 10 - 0.05,\n  11: 1 / 11 - 0.05,\n  12: 1 / 12 - 0.05,\n  13: 1 / 13 - 0.05,\n  14: 1 / 14 - 0.1,\n  15: 1 / 15 - 0.1,\n  16: 1 / 16 - 0.1,\n}\n\nfunction createAndSetupOscNode({\n  hz,\n  audioCtx,\n  gain,\n}: {\n  hz: number\n  audioCtx: AudioContext\n  gain: GainNode\n}) {\n  const osc = audioCtx.createOscillator()\n  osc.frequency.value = hz\n  osc.connect(gain)\n  return osc\n}\n\nexport function playNote({\n  note,\n  audioCtx,\n}: {\n  note: string\n  audioCtx: AudioContext\n}) {\n  const gainNode = audioCtx.createGain()\n  gainNode.connect(audioCtx.destination)\n  gainNode.gain.setTargetAtTime(0, audioCtx.currentTime, 0)\n  const osc = createAndSetupOscNode({\n    hz: NOTES_TO_HZ[note],\n    audioCtx,\n    gain: gainNode,\n  })\n  osc.start(audioCtx.currentTime)\n  gainNode.gain.setTargetAtTime(0.4, audioCtx.currentTime, 0.05)\n  gainNode.gain.setTargetAtTime(0.0001, audioCtx.currentTime + 0.25, 0.125)\n  osc.stop(audioCtx.currentTime + 1)\n}\n\ninterface PlayNotesAtTimeOptions {\n  notes: string[]\n  duration: number\n  audioCtx: AudioContext\n}\n\nexport function playNotesAtTime({\n  notes,\n  duration,\n  audioCtx,\n}: PlayNotesAtTimeOptions) {\n  if (!notes.length) {\n    return\n  }\n  const targetGain = gains[notes.length]\n  const gainNode = audioCtx.createGain()\n  const sourceNodes = notes.map((note) =>\n    createAndSetupOscNode({ hz: NOTES_TO_HZ[note], audioCtx, gain: gainNode }),\n  )\n  gainNode.gain.setTargetAtTime(0, audioCtx.currentTime, 0)\n  gainNode.connect(audioCtx.destination)\n  sourceNodes.forEach((sn) => sn.start())\n  gainNode.gain.setTargetAtTime(targetGain, audioCtx.currentTime, 0.05)\n  gainNode.gain.setTargetAtTime(\n    0.0001,\n    audioCtx.currentTime + duration * 2,\n    0.125,\n  )\n  sourceNodes.forEach((sn) => sn.stop(audioCtx.currentTime + duration * 10))\n}\n","import { playNotesAtTime, playNote } from '../audio'\nimport { drawPlayingCues, removePlayingCues } from '../matrix'\n\nfunction stepPerSec(bpm = 128) {\n  return ((60 / bpm) * 4) / 16\n}\n\nfunction stepPerMs(bpm = 128) {\n  return stepPerSec(bpm) * 1000\n}\n\nexport default class Metronome {\n  bpm: number\n  isOn: boolean\n  step: number\n  prevStep: number\n  notes: string[]\n  matrix: boolean[][]\n  interval: NodeJS.Timer | null\n  audioCtx: AudioContext\n  hasDrawnCues: boolean\n  constructor(notes: string[]) {\n    const AudioContext =\n      window.AudioContext || (window as any).webkitAudioContext\n    this.bpm = 128\n    this.isOn = false\n    this.step = null\n    this.notes = notes\n    this.interval = null\n    this.audioCtx = new AudioContext() as AudioContext\n    this.hasDrawnCues = false\n    this.matrix = notes.map(() => new Array(notes.length).fill(false))\n  }\n\n  toggleMatrix(row: number, col: number) {\n    const { matrix, notes, audioCtx } = this\n    const isOn = !matrix[row][col]\n    matrix[row][col] = isOn\n    if (isOn) {\n      playNote({ note: notes[row], audioCtx })\n    }\n  }\n\n  play() {\n    const { intervalCb, bpm } = this\n    this.interval = setInterval(intervalCb, stepPerMs(bpm))\n    this.isOn = true\n  }\n\n  pause() {\n    const { interval } = this\n    interval && clearInterval(interval)\n    this.isOn = false\n  }\n\n  stop() {\n    this.pause()\n    this.step = null\n    this.prevStep = null\n    removePlayingCues()\n  }\n\n  // private methods\n  private intervalCb = () => {\n    const { step } = this\n    if (step === null || step === 15) {\n      this.step = 0\n    } else {\n      this.step += 1\n    }\n    this.prevStep = step\n    this.hasDrawnCues = false\n    this.scheduleNotesToPlay()\n    this.draw()\n  }\n\n  private getNotesAtCurrentStep() {\n    const { step, notes, matrix } = this\n    const onNotes: string[] = []\n    for (let i = 0; i < matrix.length; i++) {\n      const isOn = matrix[i][step]\n      if (isOn) {\n        onNotes.push(notes[i])\n      }\n    }\n    return onNotes\n  }\n\n  private scheduleNotesToPlay() {\n    const { audioCtx, bpm } = this\n    const notes = this.getNotesAtCurrentStep()\n    playNotesAtTime({ notes, duration: stepPerSec(bpm), audioCtx })\n  }\n\n  private draw = () => {\n    const { prevStep, step, draw, isOn } = this\n    if (!this.hasDrawnCues) {\n      drawPlayingCues(prevStep, step)\n      this.hasDrawnCues = true\n    }\n    if (isOn) {\n      requestAnimationFrame(draw)\n    }\n  }\n}\n","import { NOTES } from './audio/notes'\nimport { render } from './matrix'\nimport Metronome from './metronome'\n\nfunction onReady(fn) {\n  if (document.readyState !== 'loading') {\n    fn()\n  } else {\n    document.addEventListener('DOMContentLoaded', () => fn())\n  }\n}\n\nfunction renderJsMatrix() {\n  const metronome = new Metronome(NOTES)\n  render({ notes: NOTES, metronome })\n}\n\nonReady(renderJsMatrix)\n"]}